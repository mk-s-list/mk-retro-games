<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Neon Snake</title>
<style>
body {
  margin:0;
  background:black;
  font-family: monospace;
  text-align:center;
  overflow:hidden;
}
h1 {
  color:#0f0;
  margin:10px 0;
  text-shadow:0 0 10px #0f0;
}
canvas {
  background:#111;
  margin-top:10px;
  box-shadow:0 0 20px #0f0;
  touch-action:none;
}
#score {
  color:#0f0;
  font-size:18px;
  margin-top:5px;
  text-shadow:0 0 5px #0f0;
}
button {
  font-size:20px;
  padding:8px 12px;
  margin:5px;
  border:none;
  border-radius:6px;
  background:#0f0;
  color:black;
}
</style>
</head>
<body>

<h1>Neon Snake</h1>
<button onclick="goFull()">â›¶ Fullscreen</button>
<canvas id="game" width="300" height="300"></canvas>
<div id="score">Score: 0</div>

<audio id="eat" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav"></audio>
<audio id="die" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.wav"></audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const eatSound = document.getElementById("eat");
const dieSound = document.getElementById("die");
const scoreDisplay = document.getElementById("score");
const box = 15;

// GAME STATE
let snake = [{x:150, y:150}];
let food = randomFood();
let dir = null;
let score = 0;

let baseSpeed = 300; // ms per move
let speed = baseSpeed;
let lastMoveTime = 0;

function goFull() { canvas.requestFullscreen(); }
function randomFood(){ return {x: Math.floor(Math.random()*20)*box, y: Math.floor(Math.random()*20)*box}; }

// SWIPE CONTROLS
let touchStartX = 0;
let touchStartY = 0;

canvas.addEventListener("touchstart", e => {
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
});

canvas.addEventListener("touchend", e => {
  let dx = e.changedTouches[0].clientX - touchStartX;
  let dy = e.changedTouches[0].clientY - touchStartY;

  if(Math.abs(dx) > Math.abs(dy)){
    if(dx > 0 && dir !== "left") dir = "right";
    else if(dx < 0 && dir !== "right") dir = "left";
  } else {
    if(dy > 0 && dir !== "up") dir = "down";
    else if(dy < 0 && dir !== "down") dir = "up";
  }
});

// DRAW
function draw(){
  ctx.fillStyle = "#111";
  ctx.fillRect(0,0,300,300);

  // Draw snake with gradient glow
  snake.forEach((s,i)=>{
    let alpha = 0.3 + 0.7*(i/snake.length);
    ctx.fillStyle = `rgba(0,255,0,${alpha})`;
    ctx.fillRect(s.x, s.y, box, box);
    ctx.strokeStyle = `rgba(0,255,0,${alpha})`;
    ctx.strokeRect(s.x, s.y, box, box);
  });

  // Draw food with pulse
  let pulse = 2 + Math.sin(Date.now()/200)*3;
  ctx.fillStyle = "#f00";
  ctx.fillRect(food.x, food.y, box, box);
  ctx.strokeStyle = "#ff5555";
  ctx.lineWidth = 2;
  ctx.strokeRect(food.x-1, food.y-1, box+2, box+2);
}

// UPDATE
function update(time){
  if(!dir) return;
  if(time - lastMoveTime < speed) return;
  lastMoveTime = time;

  let head = {...snake[0]};
  if(dir === "left") head.x -= box;
  if(dir === "right") head.x += box;
  if(dir === "up") head.y -= box;
  if(dir === "down") head.y += box;

  // Collision
  if(head.x < 0 || head.y < 0 || head.x >= 300 || head.y >= 300 ||
     snake.some(s=>s.x===head.x && s.y===head.y)){
    dieSound.play();
    snake = [{x:150,y:150}];
    dir = null;
    score = 0;
    speed = baseSpeed;
    scoreDisplay.textContent = "Score: 0";
    food = randomFood();
    return;
  }

  // Eat food
  if(head.x === food.x && head.y === food.y){
    eatSound.play();
    snake.unshift(head);
    food = randomFood();
    score += 1;
    scoreDisplay.textContent = "Score: "+score;

    // Increase speed every 10 points by 5%
    if(score % 10 === 0){
      speed *= 0.95;
    }

  } else {
    snake.pop();
    snake.unshift(head);
  }
}

// GAME LOOP
function gameLoop(time){
  update(time);
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
